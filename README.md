# Basic catalog system to manage products
---------------------


A basic catalog system to manage products. A product have basic info such as sku, name, price and brand.
There are two type of users: admins to create / update / delete products and to create / update / delete other admins; and anonymous users who can only retrieve products information but can't make changes.

-----------
Used technology
------------
*Python*<br>
*FastAPI*<br>
*Mongodb*<br>
*Sengrid*<br>



-----------
Getting Started
------------
1. Clone the repository
2. Create and activate a virtual environment
3. Install the dependencies with `pip install -r requirements.txt`
4. Download <a href="https://www.mongodb.com/try/download/community" target="_blank">mongo</a>  or create an account at <a href="https://www.mongodb.com/atlas/database" target="_blank">mongo atlas</a> and get the remote mongo uri
5. Create an account at <a href="https://signup.sendgrid.com/" target="_blank">sengrid</a> and get the sengrid api key to be able to send mails

-----------
Settings
------------
Create an `.env` file with the following environment variables:

`MONGO_URI=MONGO URI VALUE` <br>
`SECRET_KEY_JWT_LOGIN=A SECRET VALUE FOR JWT LOGIN` <br>
`ALGORITHM_JWT_LOGIN="HS256"` <br>
`EMAIL_SERVICE=SENDER EMAIL` <br>
`SENDGRID_API_KEY=API KEY GENERATED BY SENGRID` <br>

-----------
Use
------------


1. Go to the root folder
2. Run the app in the console with  `python -m uvicorn fastapi_main:app --reload`
3. Access the API documentation at <a href="http://localhost:8000/docs" target="_blank">localhost-docs</a>
4. Create a <a href="http://localhost:8000/docs#/admin/create_superadmin_admin_superadmin__post " target="_blank">superadmin</a> to be able to create other admins and click on `Try it out` button
6. Set these values
`{"admin_id": "superadmin_test",
  "username": "test",
  "email": "test@mail.com",
  "password": "test123",
  "is_superadmin": true}` and press `execute`
7. Go to <a href="http://localhost:8000/docs#/login/login_for_access_token_login__post" target="_blank">login</a> and click on `Try it out` button
8. Set `grant_type` to `password` and username set `email`to `test@mail.com` and `password` to `test123` and press `execute`
9. Now, you are logged in and can create other admins as well products
10. If you want to make changes to `products`, the id used is the `sku`

-----------
Tests
------------


1. Go to tests folder
2. Run in the console `python -m unittest filename.py`

-----------
Architecture
------------


The architecture of this project follows the DDD (Domain Driven Design) pattern, with the following layers:

- Domain: contains the entities and value objects of the application<br>
- Application: contains the use cases of the application<br>
- Infrastructure: contains the adapters to interact with external components (database, repositories, etc.)

-----------
DDD diagrams
------------


Below are the DDD diagrams for the following entities:

- Admin<br>
- Product<br>
- Login<br>
- Utils<br>


-----------
Admin
------------
![alt text](https://github.com/FcoReyesV/BackendTechnicalTest/blob/26875fe540f6e8eb84ca70c05a3207ee9c238e52/ZebrandsBackendTechnicalTest_admin_ddd_v2.jpg)

-----------
Product
------------
![alt text](https://github.com/FcoReyesV/BackendTechnicalTest/blob/298987f4871ee4304428f4835e34c98430d9fa7d/ZebrandsBackendTechnicalTest_product_ddd_v2.jpg)

-----------
Login
------------
![alt text](https://github.com/FcoReyesV/BackendTechnicalTest/blob/298987f4871ee4304428f4835e34c98430d9fa7d/ZebrandsBackendTechnicalTest_login_ddd_v2.jpg)

-----------
Utils
------------
![alt text](https://github.com/FcoReyesV/BackendTechnicalTest/blob/26875fe540f6e8eb84ca70c05a3207ee9c238e52/ZebrandsBackendTechnicalTest_utils_ddd_v1.jpg)
------------
